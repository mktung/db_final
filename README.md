# README

The team will complete the project with two datasets: global terrorism and the United States historical stock prices. 

## Getting Started

These instructions will get you a copy of the project up and running on your local machine for development and testing purposes. 

### Dataset Overview

Global terrorism datasets description:
The Global Terrorism Database (GTD) is an open-source database including information on terrorist attacks around the world from 1970 through 2017. The GTD includes systematic data on domestic as well as international terrorist incidents that have occurred during this time period and now includes more than 180,000 attacks. 

Historical stock prices of the U.S stock market: 
Daily stock prices for a selection of several thousand stock tickers from NYSE and NASDAQ. 


### Location of the Datasets

* [Global Terrorism Dataset](https://www.kaggle.com/START-UMD/gtd) - The terrorism dataset
* [Historical Stock Price Datasets](https://www.kaggle.com/ehallmar/daily-historical-stock-prices-1970-2018) - The stockprice dataset

### Link To The Video

* [Video](https://drive.google.com/file/d/1jw7z-AL4avMlHjAD2FYYDCARKUr_GYzj/view) - Video explanation

### Dataset Licensing 


Use of the data signifies your agreement to the following terms and conditions.
END USER LICENSE AGREEMENT WITH UNIVERSITY OF MARYLAND
IMPORTANT – THIS IS A LEGAL AGREEMENT BETWEEN YOU ("You") AND THE UNIVERSITY OF MARYLAND, a public agency and instrumentality of the State of Maryland, by and through the National Consortium for the Study of Terrorism and Responses to Terrorism (“START,” “US,” “WE” or “University”). PLEASE READ THIS END USER LICENSE AGREEMENT (“EULA”) BEFORE ACCESSING THE Global Terrorism Database (“GTD”). THE TERMS OF THIS EULA GOVERN YOUR ACCESS TO AND USE OF THE GTD WEBSITE, THE DATA, THE CODEBOOK, AND ANY AUXILIARY MATERIALS. BY ACCESSING THE GTD, YOU SIGNIFY THAT YOU HAVE READ, UNDERSTAND, ACCEPT, AND AGREE TO ABIDE BY THESE TERMS AND CONDITIONS. IF YOU DO NOT ACCEPT THE TERMS OF THIS EULA, DO NOT ACCESS THE GTD.
TERMS AND CONDITIONS
GTD means Global Terrorism Database data and the online user interface (www.start.umd.edu/gtd) produced and maintained by the National Consortium for the Study of Terrorism and Responses to Terrorism (START). This includes the data and codebook, any auxiliary materials present, and the user interface by which the data are presented.
LICENSE GRANT. University hereby grants You a revocable, non-exclusive, non-transferable right and license to access the GTD and use the data, the codebook, and any auxiliary materials solely for non-commercial research and analysis.
RESTRICTIONS. You agree to NOT:
a. publicly post or display the data, the codebook, or any auxiliary materials without express written permission by University of Maryland (this excludes publication of analysis or visualization of the data for non-commercial purposes);
b. sell, license, sublicense, or otherwise distribute the data, the codebook, or any auxiliary materials to third parties for cash or other considerations;
c. modify, hide, delete or interfere with any notices that are included on the GTD or the codebook, or any auxiliary materials;
d. use the GTD to draw conclusions about the official legal status or criminal record of an individual, or the status of a criminal or civil investigation;
e. interfere with or disrupt the GTD website or servers and networks connected to the GTD website; or
f. use robots, spiders, crawlers, automated devices and similar technologies to screen-scrape the site or to engage in data aggregation or indexing of the data, the codebook, or any auxiliary materials other than in accordance with the site’s robots.txt file.
YOUR RESPONSIBILITIES:
a. All information sourced from the GTD should be acknowledged and cited as follows: "National Consortium for the Study of Terrorism and Responses to Terrorism (START), University of Maryland. (2018). The Global Terrorism Database (GTD) [Data file]. Retrieved from https://www.start.umd.edu/gtd"
b. You agree to acknowledge any copyrightable materials with a copyright notice “Copyright University of Maryland 2018.”
c. Any modifications You make to the GTD for published analysis must be clearly documented and must not misrepresent analytical decisions made by START.
d. You agree to seek out an additional agreement in order to use the GTD, the data, the codebook or auxiliary materials for commercial purposes, or to create commercial product or services based on the GTD, the data, the codebook or auxiliary materials.
INTELLECTUAL PROPERTY. The University owns all rights, title, and interest in the GTD, the data and codebook, and all auxiliary materials. This EULA does not grant You any rights, title, or interests in the GTD or the data, the codebook, user interface, or any auxiliary materials other than those expressly granted to you under this EULA.
DISCLAIMER AND LIMITATION ON LIABILITY.
a. THE GTD, THE CODEBOOK, USER INTERFACE, OR ANY AUXILIARY MATERIALS ARE MADE AVAILABLE ON AN "AS IS" BASIS. UNIVERSITY DISCLAIMS ANY AND ALL REPRESENTATIONS AND WARRANTIES – WHETHER EXPRESS OR IMPLIED, ORAL OR WRITTEN, IN FACT OR ARISING BY OPERATION OF LAW – WITH RESPECT TO THE GTD, THE CODEBOOK, AND ANY AUXILIARY MATERIALS INCLUDING, BUT NOT LIMITED TO, WARRANTIES OF MERCHANTABILITY, SATISFACTORY QUALITY, FITNESS FOR A PARTICULAR PURPOSE, AND NONINFRINGEMENT OF THE INTELLECTUAL PROPERTY OR PROPRIETARY RIGHTS OF ANY THIRD PARTY. UNIVERSITY MAKES NO REPRESENTATION OR WARRANTY THAT THE GTD, THE CODEBOOK, ANY AUXILIARY MATERIALS, OR USER INTERFACE WILL OPERATE ERROR FREE OR IN AN UNINTERRUPTED FASHION.
b. In no event will the University be liable to You for any incidental, special, punitive, exemplary or consequential damages of any kind, including lost profits or business interruption, even if advised of the possibility of such claims or demands, whether in contract, tort, or otherwise, arising in connection with Your access to and use of the GTD, the codebook, user interface, or any auxiliary materials or other dealings. This limitation upon damages and claims is intended to apply without regard to whether other provisions of this EULA have been breached or proven ineffective. In no event will University’s total liability for the breach or nonperformance of this EULA exceed the fees paid to University within the current billing cycle.
c. Every reasonable effort has been made to check sources and verify facts in the GTD; however, START cannot guarantee that accounts reported in the open literature are complete and accurate. START shall not be held liable for any loss or damage caused by errors or omissions or resulting from any use, misuse, or alteration of GTD data by the USER. The USER should not infer any additional actions or results beyond what is presented in a GTD entry and specifically, the USER should not infer an individual referenced in the GTD was charged, tried, or convicted of terrorism or any other criminal offense. If new documentation about an event becomes available, START may modify the data as necessary and appropriate.
d. University is under no obligation to update the GTD, the codebook, user interface, or any auxiliary materials.
INDEMNITY. You hereby agree to defend, indemnify, and hold harmless the University and its employees, agents, directors, and officers from and against any and all claims, proceedings, damages, injuries, liabilities, losses, costs, and expenses (including reasonable attorneys’ fees and litigation expenses) relating to or arising out of Your use of the GTD, the codebook, or any auxiliary materials or Your breach of any term in this EULA.
TERM AND TERMINATION
a. This EULA and your right to access the GTD website and use the data, the codebook, and any auxiliary materials will take effect when you access the GTD.
b. University reserves the right, at any time and without prior notice, to modify, discontinue or suspend, temporarily or permanently, Your access to the GTD website (or any part thereof) without liability to You.
MISCELLANEOUS
a. The University may modify this EULA at any time. Check the GTD website for modifications.
b. No term of this Agreement can be waived except by the written consent of the party waiving compliance.
c. If any provision of this EULA is determined by a court of competent jurisdiction to be void, invalid, or otherwise unenforceable, such determination shall not affect the remaining provisions of this Agreement.
d. This Agreement does not create a joint venture, partnership, employment, or agency relationship between the Parties.
e. There are no third party beneficiaries to this agreement. You may not assign this agreement without the University’s prior written approval.
f. This EULA shall be governed by and interpreted in accordance with United States copyright law and the laws of the State of Maryland without reference to its conflicts of laws rules. Nothing in this EULA is or shall be deemed to be a waiver by the University of any of its rights or status as an agency and instrumentality of the State of Maryland. The parties mutually agree to opt out of application of the Maryland Uniform Computer Information Transactions Act (MUCITA), Maryland Code Annotated [Commercial Law] 21-101 through 21-816 to the greatest extent authorized under MUCITA.
g. This EULA represents the entire agreement between You and the University regarding the subject matter of paragraphs 1-10. There are no other understandings, written or oral, that are not included in this Agreement.
REPRESENTATION. You represent that You are at least 18 years of age.


### Relational Joining

The datasets will be joined across NASDAQ stock prices within the United States and the terrorist attack within the United States within the given year.


## Adjustments to db-setup.sql

We altered the user to Superuser because for step 6, we established crosstab, which needs to create an extension on tablefunc. It needs to be superuser in order to create extensions on tablefunc. 


```
ALTER USER dbms_project_user WITH SUPERUSER;
```


## Dataset Loading

Loading the data from load_data.py takes on average about 4 to 5 minutes. Output will be periodically printed to the terminal window to indicate status of loading.


## Application Overview

First: company_information
```
CREATE TABLE company_information(
    ticker VARCHAR(15),
    exchange VARCHAR(31),
    name VARCHAR(127),
    sector VARCHAR(127),
    industry VARCHAR(127),
    PRIMARY KEY(ticker)
);

```

Second: historical_stock_prices
```
CREATE TABLE historical_stock_prices(
    ticker VARCHAR(15) REFERENCES company_information(ticker),
    open NUMERIC(31, 2),
    close NUMERIC(31, 2),
    adj_close NUMERIC(31, 2),
    low NUMERIC(31, 2),
    high NUMERIC(31, 2),
    volume BIGINT,
    trade_date DATE,
    PRIMARY KEY(ticker, trade_date)
);

```


Third: attacks
```
CREATE TABLE attacks (
	attackID BIGINT PRIMARY KEY,
	date DATE,
	summary VARCHAR(511)
);


```

Fourth: attack_location
```
CREATE TABLE attack_location (
	attackID BIGINT PRIMARY KEY REFERENCES attacks(attackID),
	country VARCHAR(255),
	region VARCHAR(255),
	provstate VARCHAR(255),
	city VARCHAR(255)
);

```

Fifth: attack_data
```
CREATE TABLE attack_data (
	attackID BIGINT PRIMARY KEY REFERENCES attacks(attackID),
	extended BOOLEAN,
	multiple BOOLEAN,
	success BOOLEAN,
	suicide BOOLEAN,
    attack_type VARCHAR(255),
    target_type VARCHAR(255),
    target_nationality VARCHAR(255),
    number_killed INTEGER
);

```

The application.py has all the code for the queries and interface.
Database.py has all the code regarding the database queries


## Interface

User provides a country name: for example, The United States. Our application gives back the number of total attacks and total number killed in the attack that happened within the given time range. 

The second interface will show 10 countries with the most terrorist attacks with a plot from 1970 - 1990. 

The third interface will check the relationship between the number of attacks in the US and NASDAQ price in one year. It will pop up a plot from Jan - Dec in 1970, with volume weighted average price from NASQUE. 

The fourth interface will tell us the most frequent terrorist attack in a 20 year interval. Our result shows the top frequent way of terrorist attack is bombing, armed assult, assassination, facility insult and hostilge taking. 
The top 5 target types are: business, private citizens and property, military, government and police. 



